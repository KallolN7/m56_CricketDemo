using Deftouch;
using DG.Tweening;
using System;
using System.Collections.Generic;
using UnityEngine;
using System;

namespace Deftouch.Asc.OnBoarding
{
    public class OnboardingBatsmanController : MonoBehaviour
    {
        [Space(25)]
        public Animator anim;
        public Animator animBat; // Use the same animator for Normal as well as mirrored
        public Animator animHelmet;

        private AnimatorOverrideController _animatorOverrideController;
        private AnimatorOverrideController _animatorBatOverrideController;

        [SerializeField] private Vector3 startPosition;
        [SerializeField] private Transform batsmanHips;
        private Vector3 batsmanHipsPositionOnStart = new Vector3(0f, 0f, 0f);

        [SerializeField]
        private int shotSectorIndex;
        [SerializeField]
        private float animationSpeed = 1;

        [SerializeField]
        private int shotIndex;

        [SerializeField]
        private OnboardingBatsmanAnimHolder batsmanAnimHolder;

        // private List<int> data = new List<int> { };
        private List<string> batsmanAnimClipList = new List<string>()
    {
        "11_0_0",
        "11_0_1",
        "11_0_2",
        "11_0_3",
        "11_1_0",
        "11_1_1",
        "11_1_2",
        "11_1_3",
        "11_2_0",
        "11_2_1",
        "11_2_2",
        "11_2_3",
        "11_3_0",
        "11_3_1",
        "11_3_2",
        "11_3_3",
        "11_4_0",
        "11_4_1",
        "11_4_2",
        "11_4_3",
        "11_5_0",
        "11_5_1",
        "11_5_2",
        "11_5_3",
        "11_6_0",
        "11_6_1",
        "11_6_2",
        "11_6_3",
        "11_7_0",
        "11_7_1",
        "11_7_2",
        "11_7_3",
        "11_8_0",
        "11_8_1",
        "11_8_2",
        "11_8_3",
        "11_9_0",
        "11_9_1",
        "11_9_2",
        "11_9_3",
        "13_0_0",
        "13_0_1",
        "13_0_2",
        "13_0_3",
        "13_1_0",
        "13_1_1",
        "13_1_2",
        "13_1_3",
        "13_2_0",
        "13_2_1",
        "13_2_2",
        "13_2_3",
        "13_3_0",
        "13_3_1",
        "13_3_2",
        "13_3_3",
        "13_4_0",
        "13_4_1",
        "13_4_2",
        "13_4_3",
        "13_5_0",
        "13_5_1",
        "13_5_2",
        "13_5_3",
        "13_6_0",
        "13_6_1",
        "13_6_2",
        "13_6_3",
        "13_7_0",
        "13_7_1",
        "13_7_2",
        "13_7_3",
        "13_8_0",
        "13_8_1",
        "13_8_2",
        "13_8_3",
        "13_9_0",
        "13_9_1",
        "13_9_2",
        "13_9_3",
        "15_0_0",
        "15_0_1",
        "15_0_2",
        "15_0_3",
        "15_1_0",
        "15_1_1",
        "15_1_2",
        "15_1_3",
        "15_2_0",
        "15_2_1",
        "15_2_2",
        "15_2_3",
        "15_3_0",
        "15_3_1",
        "15_3_2",
        "15_3_3",
        "15_4_0",
        "15_4_1",
        "15_4_2",
        "15_4_3",
        "15_5_0",
        "15_5_1",
        "15_5_2",
        "15_5_3",
        "15_6_0",
        "15_6_1",
        "15_6_2",
        "15_6_3",
        "15_7_0",
        "15_7_1",
        "15_7_2",
        "15_7_3",
        "15_8_0",
        "15_8_1",
        "15_8_2",
        "15_8_3",
        "15_9_0",
        "15_9_1",
        "15_9_2",
        "15_9_3",
        "21_0_0",
        "21_0_1",
        "21_0_2",
        "21_0_3",
        "21_1_0",
        "21_1_1",
        "21_1_2",
        "21_1_3",
        "21_2_0",
        "21_2_1",
        "21_2_2",
        "21_2_3",
        "21_3_0",
        "21_3_1",
        "21_3_2",
        "21_3_3",
        "21_4_0",
        "21_4_1",
        "21_4_2",
        "21_4_3",
        "21_5_0",
        "21_5_1",
        "21_5_2",
        "21_5_3",
        "21_6_0",
        "21_6_1",
        "21_6_2",
        "21_6_3",
        "21_7_0",
        "21_7_1",
        "21_7_2",
        "21_7_3",
        "21_8_0",
        "21_8_1",
        "21_8_2",
        "21_8_3",
        "21_9_0",
        "21_9_1",
        "21_9_2",
        "21_9_3",
        "23_0_0",
        "23_0_1",
        "23_0_2",
        "23_0_3",
        "23_1_0",
        "23_1_1",
        "23_1_2",
        "23_1_3",
        "23_2_0",
        "23_2_1",
        "23_2_2",
        "23_2_3",
        "23_3_0",
        "23_3_1",
        "23_3_2",
        "23_3_3",
        "23_4_0",
        "23_4_1",
        "23_4_2",
        "23_4_3",
        "23_5_0",
        "23_5_1",
        "23_5_2",
        "23_5_3",
        "23_6_0",
        "23_6_1",
        "23_6_2",
        "23_6_3",
        "23_7_0",
        "23_7_1",
        "23_7_2",
        "23_7_3",
        "23_8_0",
        "23_8_1",
        "23_8_2",
        "23_8_3",
        "23_9_0",
        "23_9_1",
        "23_9_2",
        "23_9_3",
        "25_0_0",
        "25_0_1",
        "25_0_2",
        "25_0_3",
        "25_1_0",
        "25_1_1",
        "25_1_2",
        "25_1_3",
        "25_2_0",
        "25_2_1",
        "25_2_2",
        "25_2_3",
        "25_3_0",
        "25_3_1",
        "25_3_2",
        "25_3_3",
        "25_4_0",
        "25_4_1",
        "25_4_2",
        "25_4_3",
        "25_5_0",
        "25_5_1",
        "25_5_2",
        "25_5_3",
        "25_6_0",
        "25_6_1",
        "25_6_2",
        "25_6_3",
        "25_7_0",
        "25_7_1",
        "25_7_2",
        "25_7_3",
        "25_8_0",
        "25_8_1",
        "25_8_2",
        "25_8_3",
        "25_9_0",
        "25_9_1",
        "25_9_2",
        "25_9_3",
        "31_0_0",
        "31_0_1",
        "31_0_2",
        "31_0_3",
        "31_1_0",
        "31_1_1",
        "31_1_2",
        "31_1_3",
        "31_2_0",
        "31_2_1",
        "31_2_2",
        "31_2_3",
        "31_3_0",
        "31_3_1",
        "31_3_2",
        "31_3_3",
        "31_4_0",
        "31_4_1",
        "31_4_2",
        "31_4_3",
        "31_5_0",
        "31_5_1",
        "31_5_2",
        "31_5_3",
        "31_6_0",
        "31_6_1",
        "31_6_2",
        "31_6_3",
        "31_7_0",
        "31_7_1",
        "31_7_2",
        "31_7_3",
        "31_8_0",
        "31_8_1",
        "31_8_2",
        "31_8_3",
        "31_9_0",
        "31_9_1",
        "31_9_2",
        "31_9_3",
        "33_0_0",
        "33_0_1",
        "33_0_2",
        "33_0_3",
        "33_1_0",
        "33_1_1",
        "33_1_2",
        "33_1_3",
        "33_2_0",
        "33_2_1",
        "33_2_2",
        "33_2_3",
        "33_3_0",
        "33_3_1",
        "33_3_2",
        "33_3_3",
        "33_4_0",
        "33_4_1",
        "33_4_2",
        "33_4_3",
        "33_5_0",
        "33_5_1",
        "33_5_2",
        "33_5_3",
        "33_6_0",
        "33_6_1",
        "33_6_2",
        "33_6_3",
        "33_7_0",
        "33_7_1",
        "33_7_2",
        "33_7_3",
        "33_8_0",
        "33_8_1",
        "33_8_2",
        "33_8_3",
        "33_9_0",
        "33_9_1",
        "33_9_2",
        "33_9_3",
        "35_0_0",
        "35_0_1",
        "35_0_2",
        "35_0_3",
        "35_1_0",
        "35_1_1",
        "35_1_2",
        "35_1_3",
        "35_2_0",
        "35_2_1",
        "35_2_2",
        "35_2_3",
        "35_3_0",
        "35_3_1",
        "35_3_2",
        "35_3_3",
        "35_4_0",
        "35_4_1",
        "35_4_2",
        "35_4_3",
        "35_5_0",
        "35_5_1",
        "35_5_2",
        "35_5_3",
        "35_6_0",
        "35_6_1",
        "35_6_2",
        "35_6_3",
        "35_7_0",
        "35_7_1",
        "35_7_2",
        "35_7_3",
        "35_8_0",
        "35_8_1",
        "35_8_2",
        "35_8_3",
        "35_9_0",
        "35_9_1",
        "35_9_2",
        "35_9_3",
        "41_0_0",
        "41_0_1",
        "41_0_2",
        "41_0_3",
        "41_1_0",
        "41_1_1",
        "41_1_2",
        "41_1_3",
        "41_2_0",
        "41_2_1",
        "41_2_2",
        "41_2_3",
        "41_3_0",
        "41_3_1",
        "41_3_2",
        "41_3_3",
        "41_4_0",
        "41_4_1",
        "41_4_2",
        "41_4_3",
        "41_5_0",
        "41_5_1",
        "41_5_2",
        "41_5_3",
        "41_6_0",
        "41_6_1",
        "41_6_2",
        "41_6_3",
        "41_7_0",
        "41_7_1",
        "41_7_2",
        "41_7_3",
        "41_8_0",
        "41_8_1",
        "41_8_2",
        "41_8_3",
        "41_9_0",
        "41_9_1",
        "41_9_2",
        "41_9_3",
        "43_0_0",
        "43_0_1",
        "43_0_2",
        "43_0_3",
        "43_1_0",
        "43_1_1",
        "43_1_2",
        "43_1_3",
        "43_2_0",
        "43_2_1",
        "43_2_2",
        "43_2_3",
        "43_3_0",
        "43_3_1",
        "43_3_2",
        "43_3_3",
        "43_4_0",
        "43_4_1",
        "43_4_2",
        "43_4_3",
        "43_5_0",
        "43_5_1",
        "43_5_2",
        "43_5_3",
        "43_6_0",
        "43_6_1",
        "43_6_2",
        "43_6_3",
        "43_7_0",
        "43_7_1",
        "43_7_2",
        "43_7_3",
        "43_8_0",
        "43_8_1",
        "43_8_2",
        "43_8_3",
        "43_9_0",
        "43_9_1",
        "43_9_2",
        "43_9_3",
        "45_0_0",
        "45_0_1",
        "45_0_2",
        "45_0_3",
        "45_1_0",
        "45_1_1",
        "45_1_2",
        "45_1_3",
        "45_2_0",
        "45_2_1",
        "45_2_2",
        "45_2_3",
        "45_3_0",
        "45_3_1",
        "45_3_2",
        "45_3_3",
        "45_4_0",
        "45_4_1",
        "45_4_2",
        "45_4_3",
        "45_5_0",
        "45_5_1",
        "45_5_2",
        "45_5_3",
        "45_6_0",
        "45_6_1",
        "45_6_2",
        "45_6_3",
        "45_7_0",
        "45_7_1",
        "45_7_2",
        "45_7_3",
        "45_8_0",
        "45_8_1",
        "45_8_2",
        "45_8_3",
        "45_9_0",
        "45_9_1",
        "45_9_2",
        "45_9_3",
        "51_0_0",
        "51_0_1",
        "51_0_2",
        "51_0_3",
        "51_1_0",
        "51_1_1",
        "51_1_2",
        "51_1_3",
        "51_2_0",
        "51_2_1",
        "51_2_2",
        "51_2_3",
        "51_3_0",
        "51_3_1",
        "51_3_2",
        "51_3_3",
        "51_4_0",
        "51_4_1",
        "51_4_2",
        "51_4_3",
        "51_5_0",
        "51_5_1",
        "51_5_2",
        "51_5_3",
        "51_6_0",
        "51_6_1",
        "51_6_2",
        "51_6_3",
        "51_7_0",
        "51_7_1",
        "51_7_2",
        "51_7_3",
        "51_8_0",
        "51_8_1",
        "51_8_2",
        "51_8_3",
        "51_9_0",
        "51_9_1",
        "51_9_2",
        "51_9_3",
        "53_0_0",
        "53_0_1",
        "53_0_2",
        "53_0_3",
        "53_1_0",
        "53_1_1",
        "53_1_2",
        "53_1_3",
        "53_2_0",
        "53_2_1",
        "53_2_2",
        "53_2_3",
        "53_3_0",
        "53_3_1",
        "53_3_2",
        "53_3_3",
        "53_4_0",
        "53_4_1",
        "53_4_2",
        "53_4_3",
        "53_5_0",
        "53_5_1",
        "53_5_2",
        "53_5_3",
        "53_6_0",
        "53_6_1",
        "53_6_2",
        "53_6_3",
        "53_7_0",
        "53_7_1",
        "53_7_2",
        "53_7_3",
        "53_8_0",
        "53_8_1",
        "53_8_2",
        "53_8_3",
        "53_9_0",
        "53_9_1",
        "53_9_2",
        "53_9_3",
        "55_0_0",
        "55_0_1",
        "55_0_2",
        "55_0_3",
        "55_1_0",
        "55_1_1",
        "55_1_2",
        "55_1_3",
        "55_2_0",
        "55_2_1",
        "55_2_2",
        "55_2_3",
        "55_3_0",
        "55_3_1",
        "55_3_2",
        "55_3_3",
        "55_4_0",
        "55_4_1",
        "55_4_2",
        "55_4_3",
        "55_5_0",
        "55_5_1",
        "55_5_2",
        "55_5_3",
        "55_6_0",
        "55_6_1",
        "55_6_2",
        "55_6_3",
        "55_7_0",
        "55_7_1",
        "55_7_2",
        "55_7_3",
        "55_8_0",
        "55_8_1",
        "55_8_2",
        "55_8_3",
        "55_9_0",
        "55_9_1",
        "55_9_2",
        "55_9_3",
        "61_0_0",
        "61_0_1",
        "61_0_2",
        "61_0_3",
        "61_1_0",
        "61_1_1",
        "61_1_2",
        "61_1_3",
        "61_2_0",
        "61_2_1",
        "61_2_2",
        "61_2_3",
        "61_3_0",
        "61_3_1",
        "61_3_2",
        "61_3_3",
        "61_4_0",
        "61_4_1",
        "61_4_2",
        "61_4_3",
        "61_5_0",
        "61_5_1",
        "61_5_2",
        "61_5_3",
        "61_6_0",
        "61_6_1",
        "61_6_2",
        "61_6_3",
        "61_7_0",
        "61_7_1",
        "61_7_2",
        "61_7_3",
        "61_8_0",
        "61_8_1",
        "61_8_2",
        "61_8_3",
        "61_9_0",
        "61_9_1",
        "61_9_2",
        "61_9_3",
        "63_0_0",
        "63_0_1",
        "63_0_2",
        "63_0_3",
        "63_1_0",
        "63_1_1",
        "63_1_2",
        "63_1_3",
        "63_2_0",
        "63_2_1",
        "63_2_2",
        "63_2_3",
        "63_3_0",
        "63_3_1",
        "63_3_2",
        "63_3_3",
        "63_4_0",
        "63_4_1",
        "63_4_2",
        "63_4_3",
        "63_5_0",
        "63_5_1",
        "63_5_2",
        "63_5_3",
        "63_6_0",
        "63_6_1",
        "63_6_2",
        "63_6_3",
        "63_7_0",
        "63_7_1",
        "63_7_2",
        "63_7_3",
        "63_8_0",
        "63_8_1",
        "63_8_2",
        "63_8_3",
        "63_9_0",
        "63_9_1",
        "63_9_2",
        "63_9_3",
        "65_0_0",
        "65_0_1",
        "65_0_2",
        "65_0_3",
        "65_1_0",
        "65_1_1",
        "65_1_2",
        "65_1_3",
        "65_2_0",
        "65_2_1",
        "65_2_2",
        "65_2_3",
        "65_3_0",
        "65_3_1",
        "65_3_2",
        "65_3_3",
        "65_4_0",
        "65_4_1",
        "65_4_2",
        "65_4_3",
        "65_5_0",
        "65_5_1",
        "65_5_2",
        "65_5_3",
        "65_6_0",
        "65_6_1",
        "65_6_2",
        "65_6_3",
        "65_7_0",
        "65_7_1",
        "65_7_2",
        "65_7_3",
        "65_8_0",
        "65_8_1",
        "65_8_2",
        "65_8_3",
        "65_9_0",
        "65_9_1",
        "65_9_2",
        "65_9_3",
    };

        #region Animation States

        private const string STATE_SHOT = "1_11_0_1";
        private const string STATE_VICTORY = "84_Batsman_Victory";

        private int triggerIdle = Animator.StringToHash("Idle");
        private int triggerShot = Animator.StringToHash("Shot");

        #endregion


        public void InitBatsman()
        {
            GetAnimatorStateReferences();
            ResetToIdleAnimation();
        }

        public void PlayShot()
        {
            PlayBatsManAnimation(triggerShot, animationSpeed);
        }


        private void PlayBatsManAnimation(int animationTrigger, float animationSpeed, string triggerName = "")
        {
            AssignCorrectShot();
            if (anim != null && animBat != null)
            {
                anim.speed = animBat.speed = animationSpeed;
                anim.SetTrigger(animationTrigger);
                animBat.SetTrigger(animationTrigger);

            }
            else
            {
                Debug.Log("BatsmanController2, Is anim null ? " + (anim == null) + " is animBat null ? " + (animBat == null));
            }
        }

        private void AssignCorrectShot()
        {
            GetAnimatorStateReferences();
            int random = UnityEngine.Random.Range(0, batsmanAnimHolder.GetAnimationCount());
            _animatorOverrideController[STATE_SHOT] = batsmanAnimHolder.GetBatsmanShotAnimations(random);
            _animatorBatOverrideController[STATE_SHOT] = batsmanAnimHolder.GetBatShotAnimations(random);
        }

        public void ResetToIdleAnimation()
        {
            ResetAllTriggers();
            transform.position = startPosition;
            batsmanHips.position = batsmanHipsPositionOnStart;
            PlayBatsManAnimation(triggerIdle, 1);
        }

        private void ResetAllTriggers()
        {
            anim.ResetTrigger(triggerIdle);
            animBat.ResetTrigger(triggerIdle);

            anim.ResetTrigger(triggerShot);
            animBat.ResetTrigger(triggerShot);
        }

        private void GetAnimatorStateReferences()
        {
            //Batsman
            _animatorOverrideController = (AnimatorOverrideController)anim.runtimeAnimatorController;

             //Bat
            _animatorBatOverrideController = (AnimatorOverrideController)animBat.runtimeAnimatorController;
        }

    }
}